<div class="card border-0 shadow-sm rounded-4 p-4">

  <form [formGroup]="form">

    <div formArrayName="vacunas">

      <div *ngFor="let vac of vacunasArr.controls; let i = index"
           [formGroupName]="i"
           class="border rounded-4 p-3 mb-3">

        <div class="row g-3">

          <div class="col-md-4">
            <label class="form-label fw-semibold">Nombre de la vacuna</label>
            <input class="form-control" formControlName="nombre_vacuna"
                   (change)="calcularProximaDosis(i)" />
          </div>

          <div class="col-md-3">
            <label class="form-label fw-semibold">Fecha de aplicaci칩n</label>
            <input type="date" class="form-control"
                   formControlName="fecha_aplicacion"
                   (change)="calcularProximaDosis(i)" />
          </div>

          <div class="col-md-3">
            <label class="form-label fw-semibold">Pr칩xima dosis</label>
            <input type="date" class="form-control" formControlName="proxima_dosis" readonly />
          </div>

          <div class="col-md-5">
            <label class="form-label fw-semibold">Sitio de aplicaci칩n</label>
            <input class="form-control" formControlName="sitio_aplicacion" />
          </div>

          <div class="col-md-7">
            <label class="form-label fw-semibold">Reacciones adversas</label>
            <textarea class="form-control" rows="2" formControlName="reacciones_adversas"></textarea>
          </div>

        </div>

        <div class="text-end mt-2">
          <button type="button"
                  class="btn btn-outline-danger btn-sm"
                  (click)="quitarVacuna(i)"
                  *ngIf="vacunasArr.length > 1">
            Eliminar
          </button>
        </div>

      </div>

    </div>

    <div class="d-flex justify-content-between mt-4">

      <button type="button" class="btn btn-outline-primary"
              (click)="agregarVacuna()">
        A침adir vacuna
      </button>

      <button type="button"
              class="btn btn-primary px-4"
              [disabled]="loading"
              (click)="guardar()">
        Guardar vacuna(s)
      </button>

    </div>

  </form>

</div>
